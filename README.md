# Bind IQ ‚Äì Text-Only On-Boarding Chatbot

A full-stack web chatbot that walks users through an insurance-style onboarding flow entirely via text.

---

## üõ†Ô∏è Tech Stack

| Layer | Tech |
| :--- | :--- |
| **Front-end** | React 18 + TypeScript + Vite + Tailwind |
| **Back-end** | FastAPI ‚Ä¢ SQLModel ‚Ä¢ Uvicorn |
| **AI Services** | OpenAI Chat + Whisper + TTS APIs |
| **Database** | PostgreSQL 15 |
| **Container** | Docker & Docker Compose |

---

## üìÇ Repository Layout

.
‚îú‚îÄ‚îÄ backend/            # FastAPI application
‚îÇ   ‚îú‚îÄ‚îÄ main.py         # WebSocket endpoint & routing logic
‚îÇ   ‚îú‚îÄ‚îÄ models.py       # SQLModel ORM models
‚îÇ   ‚îú‚îÄ‚îÄ crud.py         # Database CRUD helpers
‚îÇ   ‚îú‚îÄ‚îÄ conversation_* # Finite-state machine prompts & logic
‚îÇ   ‚îú‚îÄ‚îÄ openai_client.py# Async wrapper around OpenAI APIs
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ frontend/           # React (Vite) single-page app
‚îÇ   ‚îî‚îÄ‚îÄ src/‚Ä¶           # Components, api.ts WebSocket wrapper, etc.
‚îú‚îÄ‚îÄ docker-compose.yml  # 3-service stack: postgres | backend | frontend
‚îî‚îÄ‚îÄ Dockerfile(s)       # Separate images for back- and front-end


*Key entry points are highlighted in `main.py` (WebSocket handler) and `openai_client.py` (API adapter).*

---

## üöÄ Quick-start with Docker

> **Prerequisite:** Docker ‚â• 23 & Docker Compose plugin.

1.  **Clone & enter the repo**
    ```bash
    git clone [https://github.com/daniyalk26/bind-chatbot-textonly.git](https://github.com/daniyalk26/bind-chatbot-textonly.git)
    cd bind-chatbot-textonly
    ```

2.  **Add secrets** (creates `backend/.env`)
    ```bash
    # Create the environment file from the example
    cp backend/.env.example backend/.env
    ```
    Now, open `backend/.env` and add your OpenAI API key and optionally specify a model:
    ```ini
    OPENAI_API_KEY=<your-key>
    OPENAI_MODEL=gpt-4o-mini
    ```

3.  **Spin up the full stack**
    ```bash
    docker compose up --build
    ```
    Compose spins up three services. You can access them on the following ports:

| Service | Purpose | Exposed Port |
| :--- | :--- | :--- |
| `postgres` | Persistent DB | `5432` |
| `backend` | FastAPI + WebSocket | `8000` |
| `frontend` | React dev server | `5173` |

Open **http://localhost:5173** in your browser to start chatting. A simple health-check is available at **http://localhost:8000/api/health**.

---

## üë®‚Äçüíª Local Development (without Docker)

### Back-end (FastAPI)

```bash
cd backend
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
export DATABASE_URL="postgresql+asyncpg://user:password@localhost:5432/bindiq_db"
export OPENAI_API_KEY="sk-..."
uvicorn backend.main:app --reload --port 8000
Front-end (React)
Bash

cd frontend
npm install
npm run dev -- --host 0.0.0.0 --port 5173
Note: Make sure VITE_API_URL in frontend/.env (or your shell) points at the FastAPI origin, e.g., http://localhost:8000.

üêò Connecting with DataGrip
You can connect to the PostgreSQL database running inside Docker to view tables and run queries.

In DataGrip, select File > New > Data Source > PostgreSQL.

Enter the following connection details:

Host: localhost

Port: 5432 (forwarded automatically by Docker Compose)

Database: bindiq_db

User: user

Password: password

Click Test Connection. Once it succeeds, you can synchronize the schemas to see your tables (users, messages, etc.) created by SQLModel.

‚öôÔ∏è Environment Variables
Variable	Location	Description
OPENAI_API_KEY	backend/.env	Required. Your OpenAI secret key.
OPENAI_MODEL	backend/.env	Optional. Overrides the default gpt-4.1-nano model.
DATABASE_URL	Compose inline	SQLAlchemy connection string (already set for Docker).
VITE_API_URL	frontend/.env	URL for the browser to call the backend (defaults to :8000).

Export to Sheets
üöß Known Limitations / TODO
No Voice Support: Voice mode (STT & TTS streaming) exists in the back-end but is disabled in this text-only fork.

Basic Validation: The app uses basic email & ZIP validation but lacks production-grade authentication.

No Migrations: Tables are auto-generated by SQLModel on the first launch. For production, a migration tool like Alembic should be used.

üìú License
MIT ¬© 2025 Daniyal Khalid
